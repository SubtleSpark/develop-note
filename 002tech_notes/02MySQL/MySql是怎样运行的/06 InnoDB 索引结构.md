## 聚簇索引
![[Excalidraw/InnoDB存储结构.excalidraw#area=聚簇索引结构|image|2000]]


### 索引上叶节点和非叶节点比较

|                    | 非叶节点（目录）      | 叶节点（数据）     |
| ------------------ | ------------- | ----------- |
| 记录项 `record_type`  | 1             | 0           |
| 记录项 `min_rec_mask` | 每页最小项为 1      | 0           |
| 记录的列数              | 只有主键和页号，没有隐藏列 | 表的所有列，包括隐藏列 |
除了上述的几点外，两者几乎没有其他区别了。`FIL_PAGE_TYPE`都为`FIL_PAGE_INDEX`，组成结构也相同。非叶节点的主键，记录的所指向页的**最小**的主键值


### 聚簇索引特性
1. 使用记录主键值的大小进行记录和页的排序，这包括三个方面的含义：
    - **页内**的记录是按照主键的大小顺序排成一个**单向链表**。
    - **页与页之间**，按照主键大小顺序排成一个**双向链表**。
    - 存放目录项记录的页分为不同的层次，在**同一层次中的页**也是根据页中目录项记录的主键大小顺序排成一个双向链表。
        
2. `B+`树的叶子节点存储的是完整的用户记录。即这个记录中存储了所有列的值（包括隐藏列）。


## 二级索引
### 二级索引结构图
![[Excalidraw/InnoDB存储结构.excalidraw#area=二级索引结构|image|2000]]

- 页内的记录，按照二级索引列的值大小顺序排成一个单向链表。
- 同一层次的页，按照索引列的大小排序成双向链表。

为了满足页内mu lu xiang

#### 聚簇索引&非聚簇索引区别

|      | 聚簇索引       | 非聚簇索引         |
| ---- | ---------- | ------------- |
| 非叶节点 | 主键 + 页号    | 索引列 + 主键 + 页号 |
| 叶节点  | 完整数据，包括隐藏列 | 索引列 + 主键      |
|      |            |               |

## 索引其他注意事项
###

