## 数据页中字段说明

|          名称          | 中文名       | Byte | 简单描述         |
| :------------------: | :-------- | ---: | :----------- |
|    `File Header`     | 文件头部      |   38 | 页的一些通用信息     |
|    `Page Header`     | 页面头部      |   56 | 数据页专有的一些信息   |
| `Infimum + Supremum` | 最小记录和最大记录 |   26 | 两个虚拟的行记录     |
|    `User Records`    | 用户记录      |  不确定 | 实际存储的行记录内容   |
|     `Free Space`     | 空闲空间      |  不确定 | 页中尚未使用的空间    |
|   `Page Directory`   | 页面目录      |  不确定 | 页中的某些记录的相对位置 |
|    `File Trailer`    | 文件尾部      |    8 | 校验页是否完整      |


## page demo 数据定义
```sql
CREATE TABLE page_demo(
    c1 INT,
    c2 INT,
    c3 VARCHAR(10000),
    PRIMARY KEY (c1)
) CHARSET=ascii ROW_FORMAT=Compact;

INSERT INTO page_demo
VALUES (1, 100, 'aaaa'),
       (2, 200, 'bbbb'),
       (3, 300, 'cccc'),
       (4, 400, 'dddd');

DELETE FROM page_demo WHERE c1 = 2;

```

## Infimum、 Supremum、 User Records
- Infimum、 Supremum 是 innodb 自动添加的伪记录
- 


## Page Directory（页目录）
### 结构
Page Directory 是一个数组，数组中的每个元素称为一个槽(slot)。
- 将页中所有记录按主键顺序排列后，可以将连续的几个记录组成一组。
- 每个槽存储的是每组中**最大的记录**的**真实数据部分**，相对于页的起始位置的偏移量。


### 页目录记录规则
Page Directory 和 用户记录组成了一个跳表。遵循以下的规则，随着用户记录的增长而变化。
- 对于最小记录所在的分组只能有  *1* 条记录，最大记录所在的分组拥有的记录条数只能在 *1~8* 条之间，剩下的分组中记录的条数范围只能在是 *4~8* 条之间。所以分组是按照下面的步骤进行的
- 初始情况下一个数据页里只有最小记录和最大记录两条记录，它们分属于两个分组。
- 之后每插入一条记录，都会从`页目录`中找到主键值比本记录的主键值大并且差值最小的槽，然后把该槽对应的记录的`n_owned`值加1，表示本组内又添加了一条记录，直到该组中的记录数等于8个。
- 在一个组中的记录数等于8个后再插入一条记录时，会将组中的记录拆分成两个组，一个组中4条记录，另一个5条记录。这个过程会在`页目录`中新增一个`槽`来记录这个新增分组中最大的那条记录的偏移量。


## Page Header



