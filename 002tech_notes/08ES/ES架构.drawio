<mxfile host="65bd71144e">
    <diagram id="es-architecture" name="ES架构图">
        <mxGraphModel dx="808" dy="682" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="client" value="客户端应用" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
                    <mxGeometry x="40" y="50" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="http_interface" value="HTTP 接口" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="40" y="120" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="es_cluster" value="Elasticsearch 集群" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;dashed=1;verticalAlign=top;fontSize=14;" parent="1" vertex="1">
                    <mxGeometry x="220" y="30" width="940" height="550" as="geometry"/>
                </mxCell>
                <mxCell id="coord_node" value="协调节点&#xa;(Coordinating Node)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="260" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="master_node" value="主节点&#xa;(Master Node)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="420" y="100" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="data_nodes_group" value="数据节点 (Data Nodes)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;dashed=1;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="260" y="200" width="860" height="350" as="geometry"/>
                </mxCell>
                <mxCell id="node1" value="Node 1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="290" y="240" width="240" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="node2" value="Node 2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="560" y="240" width="240" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="node3" value="Node 3" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="830" y="240" width="240" height="280" as="geometry"/>
                </mxCell>
                <mxCell id="index_a_primary_0" value="Index A&#xa;主分片 0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;" parent="1" vertex="1">
                    <mxGeometry x="300" y="270" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="index_a_replica_1" value="Index A&#xa;副本分片 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#ff9800;" parent="1" vertex="1">
                    <mxGeometry x="390" y="270" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="index_a_primary_1" value="Index A&#xa;主分片 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;" parent="1" vertex="1">
                    <mxGeometry x="570" y="270" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="index_a_replica_0" value="Index A&#xa;副本分片 0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#ff9800;" parent="1" vertex="1">
                    <mxGeometry x="840" y="270" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="index_b_primary_0" value="Index B&#xa;主分片 0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;" parent="1" vertex="1">
                    <mxGeometry x="300" y="340" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="index_b_replica_0" value="Index B&#xa;副本分片 0" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#ff9800;" parent="1" vertex="1">
                    <mxGeometry x="570" y="340" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="lucene1" value="Lucene 存储引擎" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="300" y="410" width="220" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="segment1" value="Segment 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#3f51b5;" parent="1" vertex="1">
                    <mxGeometry x="310" y="440" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="segment2" value="Segment 2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#3f51b5;" parent="1" vertex="1">
                    <mxGeometry x="380" y="440" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="segment3" value="Segment 3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#3f51b5;" parent="1" vertex="1">
                    <mxGeometry x="450" y="440" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="storage_details" value="• 倒排索引&#xa;• Stored Fields&#xa;• Doc Values" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;" parent="1" vertex="1">
                    <mxGeometry x="310" y="475" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="lucene2" value="Lucene 存储引擎" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;" parent="1" vertex="1">
                    <mxGeometry x="570" y="410" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="lucene3" value="Lucene 存储引擎" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;" parent="1" vertex="1">
                    <mxGeometry x="840" y="410" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="arrow1" value="HTTP 请求" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="http_interface" target="coord_node" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arrow2" value="路由&amp;协调" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="coord_node" target="index_a_primary_0" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arrow3" value="主副本同步" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;" parent="1" source="index_a_primary_0" target="index_a_replica_0" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="arrow4" value="主副本同步" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="index_a_primary_1" target="index_a_replica_1" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="client_arrow" value="RESTful API" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="client" target="http_interface" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="cluster_mgmt" value="集群管理" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="master_node" target="data_nodes_group" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="legend" value="图例" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="40" y="200" width="150" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="legend_primary" value="主分片" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;" parent="1" vertex="1">
                    <mxGeometry x="50" y="230" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend_replica" value="副本分片" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffccbc;strokeColor=#ff9800;" parent="1" vertex="1">
                    <mxGeometry x="120" y="230" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend_coord" value="协调节点" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
                    <mxGeometry x="50" y="270" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend_master" value="主节点" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
                    <mxGeometry x="120" y="270" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend_data" value="数据节点" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;" parent="1" vertex="1">
                    <mxGeometry x="50" y="310" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="legend_lucene" value="Lucene层" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;" parent="1" vertex="1">
                    <mxGeometry x="120" y="310" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="arch_note" value="• 去中心化架构&#xa;• 水平扩展&#xa;• 自动故障转移&#xa;• 分片副本机制" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;" parent="1" vertex="1">
                    <mxGeometry x="50" y="350" width="130" height="40" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>