<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="451px" width="1091px" viewBox="-10 -10 1111 471" content="&lt;mxGraphModel dx=&quot;1801&quot; dy=&quot;918&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;0&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;mxCell id=&quot;4&quot; value=&quot;调用 orm 的 API&quot; style=&quot;edgeStyle=none;html=1;&quot; parent=&quot;1&quot; source=&quot;2&quot; target=&quot;3&quot; edge=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;2&quot; value=&quot;代码中执行数据库操作&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;-200&quot; y=&quot;100&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;7&quot; value=&quot;&quot; style=&quot;edgeStyle=none;html=1;&quot; parent=&quot;1&quot; source=&quot;3&quot; target=&quot;6&quot; edge=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;20&quot; value=&quot;获取数据源连接&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];&quot; parent=&quot;7&quot; vertex=&quot;1&quot; connectable=&quot;0&quot;&gt;&lt;mxGeometry x=&quot;0.15&quot; y=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&lt;mxPoint x=&quot;-9&quot; y=&quot;-1&quot; as=&quot;offset&quot;/&gt;&lt;/mxGeometry&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;3&quot; value=&quot;ORM Framework&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;dashed=1;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;40&quot; y=&quot;100&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;5&quot; value=&quot;DB&quot; style=&quot;shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;620&quot; y=&quot;90&quot; width=&quot;60&quot; height=&quot;80&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;17&quot; value=&quot;执行CRUD&quot; style=&quot;edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;&quot; parent=&quot;1&quot; source=&quot;6&quot; target=&quot;5&quot; edge=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;23&quot; value=&quot;单数据源的情况下，&amp;lt;br&amp;gt;spring 自动注入了 DataSource&quot; style=&quot;edgeStyle=none;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;&quot; parent=&quot;1&quot; source=&quot;6&quot; target=&quot;22&quot; edge=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;26&quot; value=&quot;多数据源改造&quot; style=&quot;edgeStyle=none;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;&quot; parent=&quot;1&quot; source=&quot;6&quot; target=&quot;25&quot; edge=&quot;1&quot;&gt;&lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;6&quot; value=&quot;dataSource.getConnection();&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;align=center;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;280&quot; y=&quot;100&quot; width=&quot;200&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;22&quot; value=&quot;&amp;lt;span&amp;gt;@Bean&amp;lt;/span&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;DataSource dataSource&amp;lt;/div&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;align=left;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;160&quot; y=&quot;340&quot; width=&quot;200&quot; height=&quot;60&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;mxCell id=&quot;25&quot; value=&quot;&amp;lt;span&amp;gt;@Bean&amp;lt;br&amp;gt;&amp;lt;/span&amp;gt;@Primary&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;DynamicDataSource impl DataSource {&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; DataSource dataSource1;&amp;lt;/div&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; DataSource&amp;amp;nbsp;dataSource2;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; public getConnection(){&amp;lt;/span&amp;gt;&amp;lt;br&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; &amp;amp;nbsp; /&amp;lt;/span&amp;gt;/ 重写这个方法，根据需求，动态提供数据源&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;span&amp;gt;&amp;lt;/span&amp;gt;&amp;amp;nbsp; &amp;amp;nbsp; }&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;}&amp;lt;/div&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;align=left;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&lt;mxGeometry x=&quot;400&quot; y=&quot;340&quot; width=&quot;490&quot; height=&quot;200&quot; as=&quot;geometry&quot;/&gt;&lt;/mxCell&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;"><style type="text/css"></style><path d="M 120.5 40.5 L 234.13 40.5" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 239.38 40.5 L 232.38 44 L 234.13 40.5 L 232.38 37 Z" fill="#f0f0f0" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; background-color: #2a2a2a; white-space: nowrap; ">调用 orm 的 API</div></div></div></foreignObject></g><rect x="0.5" y="10.5" width="120" height="60" fill="#2a2a2a" stroke="#f0f0f0" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 41px; margin-left: 2px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">代码中执行数据库操作</div></div></div></foreignObject></g><path d="M 360.5 40.5 L 474.13 40.5" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 479.38 40.5 L 472.38 44 L 474.13 40.5 L 472.38 37 Z" fill="#f0f0f0" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 421px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; background-color: #2a2a2a; white-space: nowrap; ">获取数据源连接</div></div></div></foreignObject></g><rect x="240.5" y="10.5" width="120" height="60" fill="#2a2a2a" stroke="#f0f0f0" stroke-dasharray="3 3" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 41px; margin-left: 242px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">ORM Framework</div></div></div></foreignObject></g><path d="M 820.5 15.5 C 820.5 7.22 833.93 0.5 850.5 0.5 C 858.46 0.5 866.09 2.08 871.71 4.89 C 877.34 7.71 880.5 11.52 880.5 15.5 L 880.5 65.5 C 880.5 73.78 867.07 80.5 850.5 80.5 C 833.93 80.5 820.5 73.78 820.5 65.5 Z" fill="#2a2a2a" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 880.5 15.5 C 880.5 23.78 867.07 30.5 850.5 30.5 C 833.93 30.5 820.5 23.78 820.5 15.5" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 53px; margin-left: 822px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">DB</div></div></div></foreignObject></g><path d="M 680.5 40.5 L 814.13 40.5" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 819.38 40.5 L 812.38 44 L 814.13 40.5 L 812.38 37 Z" fill="#f0f0f0" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 41px; margin-left: 751px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; background-color: #2a2a2a; white-space: nowrap; ">执行CRUD</div></div></div></foreignObject></g><path d="M 530.5 70.5 L 472.51 244.46" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 470.85 249.44 L 469.75 241.69 L 472.51 244.46 L 476.39 243.91 Z" fill="#f0f0f0" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 161px; margin-left: 500px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; background-color: #2a2a2a; white-space: nowrap; ">单数据源的情况下，<br />spring 自动注入了 DataSource</div></div></div></foreignObject></g><path d="M 630.5 70.5 L 720.09 244.84" fill="none" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><path d="M 722.49 249.51 L 716.18 244.88 L 720.09 244.84 L 722.4 241.68 Z" fill="#f0f0f0" stroke="#f0f0f0" stroke-miterlimit="10" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 160px; margin-left: 677px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; background-color: #2a2a2a; white-space: nowrap; ">多数据源改造</div></div></div></foreignObject></g><rect x="480.5" y="10.5" width="200" height="60" fill="#60a917" stroke="#2d7600" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 41px; margin-left: 482px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">dataSource.getConnection();</div></div></div></foreignObject></g><rect x="360.5" y="250.5" width="200" height="60" fill="#2a2a2a" stroke="#f0f0f0" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 281px; margin-left: 363px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><span>@Bean</span><br /><div>DataSource dataSource</div></div></div></div></foreignObject></g><rect x="600.5" y="250.5" width="490" height="200" fill="#2a2a2a" stroke="#f0f0f0" pointer-events="none"/><g><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 488px; height: 1px; padding-top: 351px; margin-left: 603px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #f0f0f0; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><span>@Bean<br /></span>@Primary<br /><div>DynamicDataSource impl DataSource {</div><div><span></span>    DataSource dataSource1;</div>    DataSource dataSource2;<br /><br /><span>    public getConnection(){</span><br /><div><span><span></span>        /</span>/ 重写这个方法，根据需求，动态提供数据源</div><div><span></span>    }</div><div>}</div></div></div></div></foreignObject></g></svg>